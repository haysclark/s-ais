#!/usr/bin/env node
'use strict';

const pgp = require('pg-promise')();

const dbConfig = require('./../lib/db/cache-config');
const CacheService = require('./../lib/db/cache-service');

/**
 * Configure sAIS Postgres Database
 */
const db = pgp(dbConfig());

process.stdout.write('sAIS: Database Setup: ');
new CacheService(db)
	.createPlacemarkTable()
	.then(() => {
		pgp.end();
		process.stdout.write('Success!\n');
		process.exit(0);
	})
	.catch(err => {
		process.stdout.write('Failed!\n');
		console.error(err.message);
		process.exit(1);
	});
